version: '3.7'
services:
  ws:
    build: ./ws
    volumes:
      - ./config:/root/config
      - ./app:/root/app
      - go_modules:/root/gopath/pkg/mod
      - ./wd:/root/wd
      - ./ws/scripts:/root/scripts
      - /tmp/.X11-unix:/tmp/.X11-unix
      - goland:/root/.GoLand2019.3
      - pycharm:/root/.PyCharm2019.3
      - java_config:/root/.java
      - pipenv_packages:/root/.local/share/virtualenvs
      - pip_packages:/usr/local/lib/python3.8/site-packages
      - java_hsperfdata:/tmp/hsperfdata_root
    ports:
      - 18285:8285
      - 18286:8286
      - 18385:8385
      - 18386:8386
      - 14200:4200
    stdin_open: true
    tty: true
    container_name: ws
    environment:
      DISPLAY:
    extra_hosts:
      - go.tvbit.local:0.0.0.0
    networks:
      default:
        aliases:
          - go.tvbit.local
  mysql:
    build: mysql
    volumes:
      - ./app:/mysql/app
      - mysql:/var/lib/mysql
    ports:
      - 13306:3306
    container_name: mysql
  php:
    build: php
    volumes:
      - ./app:/root/app
    container_name: php
  web:
    build: ./web
    ports:
      - 10080:80
      - 10443:443
    networks:
      default:
        aliases:
          - public.tvbit.local
          - master.tvbit.local
    volumes:
      - ./app:/root/app
      - ./wd:/root/wd
    container_name: web
  clickhouse:
    build: ./clickhouse
    container_name: clickhouse
    ports:
      - 18123:8123
      - 19000:9000
    volumes:
      - clickhouse:/var/lib/clickhouse
volumes:
  mysql:
  go_modules:
  clickhouse:
  goland:
  pycharm:
  java_config:
  java_hsperfdata:
  pipenv_packages:
  pip_packages: